<div class="container">
  <div class="mt-2">
    <button type="button" class="btn btn-light" routerLink="/list">Back</button>
  </div>
  <form [formGroup]="productForm" class="mt-3">
    <fieldset>
      <legend class="bold">{{ mode }} Product</legend>
      <div class="form-group">
        <label for="name" class="form-label mt-4">Product Name</label>
        <input type="text" class="form-control" minlength="5" maxlength="10" formControlName="name" id="name"
          placeholder="Enter product name" [ngClass]="{ 'is-invalid': f.name.touched && f.name.errors }">

        <div *ngIf="f.name.touched && f.name.errors" class="invalid-feedback">
          <div *ngIf="f.name.errors.pattern">Product Name must contain only Alphabets</div>
          <div *ngIf="f.name.errors.required">Product Name is required</div>
          <div *ngIf="f.name.errors['minlength']">Product Name must be at least 5 characters long</div>
          <div *ngIf="f.name.errors['maxlength']">Product Name must not exceed 10 characters long</div>
        </div>
      </div>
      <div class="form-group">
        <label for="category" class="form-label mt-4">Category</label>
        <select class="form-select" formControlName="category" id="category"
          [ngClass]="{ 'is-invalid': f.category.touched && f.category.errors }">
              <option *ngFor="let c of allCategories" [value]='c'>{{ c }}</option>
        </select>

        <div *ngIf="f.category.touched && f.category.errors" class="invalid-feedback">
          <div *ngIf="f.category.errors.required">Product Category is required</div>
        </div>
      </div>
      <div class="form-group">
        <label for="quantity" class="form-label mt-4">Quantity</label>
        <select class="form-select" formControlName="quantity" id="quantity"
          [ngClass]="{ 'is-invalid': f.quantity.touched && f.quantity.errors }">
          <option>1</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5</option>
        </select>

        <div *ngIf="f.quantity.touched && f.quantity.errors" class="invalid-feedback">
          <div *ngIf="f.quantity.errors.required">Product Quantity is required</div>
        </div>
      </div>
      <div class="row">
        <div class="col-4">
          <div class="form-group">
            <label for="currency" class="form-label mt-4">Currency</label>
            <select class="form-select" id="currency" formControlName="currency" name="currency"
              [ngClass]="{ 'is-invalid': f.currency.touched && f.currency.errors }">
              <option>select currency</option>
              <option value="BTC">Bitcoin</option>
              <option value="GBP">British Pound Sterling</option>
              <option value="CAD">Canadian Dollar</option>
              <option value="CNY">Chinese Yuan</option>
              <option value="EUR">Euro</option>
              <option value="DEM">German Mark</option>
              <option value="HKD">Hong Kong Dollar</option>
              <option value="INR">Indian Rupee</option>
              <option value="JPY">Japanese Yen</option>
              <option value="USD">US Dollar</option>
            </select>

            <div *ngIf="f.currency.touched && f.currency.errors" class="invalid-feedback">
              <div *ngIf="f.currency.errors.required">required</div>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="form-group">
            <label for="price" class="form-label mt-4">price</label>
            <input type="number" class="form-control" id="price" formControlName="price"
              [ngClass]="{ 'is-invalid': f.price.touched && f.price.errors }">
            <div *ngIf="f.price.touched && f.price.errors" class="invalid-feedback">
              <div *ngIf="f.price.errors.required">required</div>
              <div *ngIf="f.price.errors['min']">Must be greater than 0</div>
            </div>
          </div>

        </div>
      </div>

      <div class="mt-3 text-right">
        <button type="submit" class="btn btn-primary" (click)="onSubmit()"
          [disabled]="productForm.invalid">
          {{ mode === 'New' ? 'Submit' : 'Update' }}
        </button>
      </div>
    </fieldset>
  </form>
</div>
